name: Release Manager
on:
  push:
    branches:
      - main
    tags:
      - "v*.*.*"
#  pull_request:
#    branches: [ main ]
# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
jobs:
# --------------------  create zip file --------------------
  pack-zip:
    name: Create Zip from Folders
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          clean: false    # if true checkout deletes everything after use and other jobs cannot access the files down the line
      - name: Archive Release
        uses: thedoctor0/zip-release@master
        with:
          type: 'zip'
          filename: 'AnexWeapons'
          exclusions: '*.git* /*node_modules/* .editorconfig'
#       *.git* *.github* *.gradle* *.idea* *.run* /*build/* /*gradle/* /*libs /*readme_resources .gitattributes .gitignore build.gradle.kts gradle* gradle.* package.json package-lock.json README.md
# generates list of all files in root directory, download log from actions tab in github to view
      - name: check zip file log
        run: |
          cd
          ls -R
      - name: Realease to Github Releases
        uses: ncipollo/release-action@v1
        with:
          artifacts: 'AnexWeapons.zip'
          token: ${{ secrets.GITHUB_TOKEN }}
# --------------------  Upload zip to Github Release --------------------
#  release-zip:
#    name: Realease to Github Releases
#    runs-on: ubuntu-latest
#    needs: pack-zip
#    steps:
#      - uses: actions/checkout@v3
#      - uses: ncipollo/release-action@v1
#        with:
#          artifacts: 'AnexWeapons.zip'
#          token: ${{ secrets.GITHUB_TOKEN }}